<html>
<head>
  <meta charset="utf-8">
  <title>Mocha Tests</title>
  <link href="/test/mocha/env/mocha.css" rel="stylesheet" />
</head>
<body>
  <div id="mocha"></div>

  <script src="/test/mocha/env/mocha.js"></script>
  <script src="/test/mocha/env/chai.js"></script>
  <script src="/lunr.js"></script>

  <script>
    mocha.setup('tdd')
    window.assert = chai.assert

    window.withFixture = function (name, fn) {
      var fixturePath = '/test/fixtures/' + name,
          xhr = new XMLHttpRequest

      xhr.addEventListener('load', function () {
        if (this.status != 200) {
          fn('non 200 response')
        } else {
          fn(null, this.responseText)
        }
      })

      xhr.open('GET', fixturePath)
      xhr.send()
    }
  </script>
  <script src="/test/mocha/query_lexer_test.js"></script>
  <script src="/test/mocha/stemmer_test.js"></script>
  <script src="/test/mocha/token_test.js"></script>
  <script src="/test/mocha/vector_test.js"></script>
  <script src="/test/mocha/search_test.js"></script>
  <script src="/test/mocha/match_data_test.js"></script>
  <script src="/test/mocha/tokenizer_test.js"></script>
  <script src="/test/mocha/pipeline_test.js"></script>
  <script src="/test/mocha/query_parser_test.js"></script>
  <script src="/test/mocha/builder_test.js"></script>
  <script src="/test/mocha/stop_word_filter_test.js"></script>
  <script src="/test/mocha/token_set_test.js"></script>
  <script src="/test/mocha/trimmer_test.js"></script>
  <script>
    //mocha.checkLeaks();
    mocha.globals(['lunr']);
    mocha.run();
  </script>
</body>
</html>
